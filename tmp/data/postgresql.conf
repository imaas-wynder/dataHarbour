nix
{ config, pkgs, ... }:
let
  postgresqlConf = builtins.readFile "/tmp/data/postgresql.conf";
  modifiedPostgresqlConf = builtins.replaceStrings
    [ "#unix_socket_directories = '/run/postgresql'" ]
    [ "unix_socket_directories = '/tmp'" ]
    postgresqlConf;
in
builtins.writeFile {
  name = "postgresql.conf";
  text = modifiedPostgresqlConf;
  destination = "/tmp/data/postgresql.conf";
}